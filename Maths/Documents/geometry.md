# Line
Line is defined as long object with length $=\infty$ and no width, height or curve.

## Line in $2$-Dimensional Field (Plane)

### Equation of line

$$ax+by+c=0$$

Set of valid lines are infinite points where it satisfies the given equation:

$$L=\lbrace(x,y)\ |\ ax+by+c=0,\ a,b,c\in\mathbb{R}\rbrace$$

These equations can also be written as

$$y=mx+c$$

A slope-intercept form of equation, where $m$ is slope and $c$ is value such that $(0,c)$ is point on the line. 

A line can also be defined by extending segment of line generated by shortest distance between two points $(x_1,y_1)$ and $(x_2,y_2)$ . Knowing that generated points $(x,y)$ should be collinear, we get the equation:

$$\dfrac{y-y_1}{x-x_1}=\dfrac{y_2-y_1}{x_2-x_1}$$
Finding similarities with equation $y=mx+c$ :

$$
\begin{matrix}
y&=&\dfrac{y_2-y_1}{x_2-x_1}\cdot x+\dfrac{x_1\cdot y_1-x_1\cdot y_2}{x_2-x_1}+y_1\\
&=&\dfrac{y_2-y_1}{x_2-x_1}\cdot x+\dfrac{x_2\cdot y1-x_1\cdot y_2}{x_2-x_1}\\
&=&m\cdot x+c
\end{matrix}
$$

Finding similarities with equation $ax+by+c=0$ :

$$
\begin{matrix}
y&=&\dfrac{y_2-y_1}{x_2-x_1}\cdot x+\dfrac{x_2\cdot y1-x_1\cdot y_2}{x_2-x_1}\\
\implies (x_2-x_1)\cdot y&=&(y_2-y_1)\cdot x+(x_2\cdot y_1-x_1\cdot y_2)\\
(y_1-y_2)\cdot x+(x_2-x_1)\cdot y+(x_1\cdot y_2-x_2\cdot y_1)&=&0\\
a\cdot x+b\cdot y + c&=&0
\end{matrix}
$$

```haskell
data Point2d = Point2d Double Double

data Line2d = Line2d Point2d Point2d | Coeff2d Double Double Double

-- Return coefficient of given line if defined by two points
toCoeffValue :: Line2d -> (Float, Float, Float)
toCoeffValue line = (a, b, c)
  where
    (a, b, c) = do
      case line of
        Coeff2d a b c -> (a, b, c)
        Line2d p1 p2 -> (y1 - y2, x2 - x1, y2 * x1 - x2 * y1)
          where
            (x1, y1) = case p1 of Point2d x1 y1 -> (x1, y1)
            (x2, y2) = case p2 of Point2d x2 y2 -> (x2, y2)
```

### Point of intersection of two lines

Two lines will have either 0, 1 or $\infty$ solution depending on relative orientation. 

Let us assume $a_1x+b_1y+c_1=0$ and $a_2x+b_2y+c_2=0$ are the two lines, then

1. There are $0$ solutions if they are parallel and $c_1\neq c_2$.
2. There is $1$ solution if slope are not equal, i.e., $\dfrac{-a_1}{b_1}\neq\dfrac{-a_2}{b_2}$ .
3. There are $\infty$ solution if $\dfrac{a_1}{a_2}=\dfrac{b_1}{b_2}=\dfrac{c_1}{c_2}$ . (In short, line equation is same).

To find out solution for the second case: we substitute values:

$$
\begin{matrix}
x=\dfrac{c_2\cdot b_1-c_1\cdot b_2}{a_1\cdot b_2-a_2\cdot b_1},&
y=\dfrac{c_1\cdot a_2-c_2\cdot a_1}{a_1\cdot b_2-a_2\cdot b_1}
\end{matrix}
$$

```haskell
intersection :: Line2d -> Line2d -> Point2d
intersection line1 line2
  | a1 * b2 - a2 * b1 == 0 = Point2d (1 / 0) (1 / 0) -- If slope is same, then they are parallel, send value as inf inf
  | otherwise = Point2d ((c2 * b1 - c1 * b2) / (a1 * b2 - a2 * b1)) ((c1 * a2 - a1 * c2) / (a1 * b2 - a2 * b1))
  where
    (a1, b1, c1) = toCoeffValue line1
    (a2, b2, c2) = toCoeffValue line2
```

### Line-Point Distance

The shortest distance between line $L\equiv ax+by+c=0$ and a point $P=(x_0,y_0)$ is: a segment generated by line $\hat{L} \perp L$ and passes through $P$. 

Equation for perpendicular line $\hat L$, is $bx-ay+c'=0$ where $c=ay_0-bx_0$ (For reference, see $y=mx+c$, with slope $m=\dfrac{b}a$. and construct equation).

By above equation, we find intersection point $P_i=(x_i,y_i)$ of these two lines:

$$
\begin{matrix}
\begin{array}{cll}
a_1=a,&b_1=b,&c_1=c\\
a_2=b,&b_2=-a,&c_2=(ay_0-bx_0)\\
\end{array}\\
\\
\begin{matrix}
\implies x_i=\dfrac{b(bx_0-ay_0)-ac}{a^2+b^2},&y_i=\dfrac{-bc+a(ay_0-bx_0)}{a^2+b^2}
\end{matrix}
\end{matrix}
$$

Distance between these two points:

$$
\begin{matrix}
D&=&\sqrt{(x_i-x_0)^2+(y_i-y_0)^2}\\
&=&\sqrt{\left(\dfrac{b^2x_0-bay_0-ac-a^2x_0-b^2x_0}{a^2+b^2}\right)^2+\left(\dfrac{a^2y_0-abx_0-bc-a^2y_0-b^2y_0}{a^2+b^2}\right)^2}\\
&=&\dfrac{1}{a^2+b^2}\sqrt{a^2\cdot (ax_0+by_0+c)^2+b^2\cdot (ax_0+by_0+c)^2}\\
&=&\dfrac{|ax_0+by_0+c_0|}{\sqrt{a^2+b^2}}
\end{matrix}
$$

```haskell
linePointDistIntersectionPoint :: Line2d -> Point2d -> Point2d
linePointDistIntersectionPoint line point = intersection line (Coeff2d (-b) a (b * x - a * y))
  where
    (a, b, _) = toCoeffValue line
    (x, y) = case point of Point2d x y -> (x, y)

linePointDist :: Line2d -> Point2d -> Double
linePointDist line point = abs (substitute line point / sqrtDouble (a * a + b * b))
  where
    (a, b, _) = toCoeffValue line
```

### Parallel-Line Distance

Distance between Line $L_1\equiv ax+by+c_1=0$ and $L_2\equiv ax+by+c_2=0$ is: a segment by line $\hat{L} \perp L_1\implies \hat{L}\perp L_2$.

This equation $\hat{L}\equiv bx-ay+c'=0$ where $c'\in\mathbb{R}$ .

Point of [[geometry#Point of intersection of two lines|intersection]] for line $(L_1,\hat{L})=(x_1,y_1)$ and $(L_2,\hat{L})=(x_2,y_2)$ is:

$$
\begin{matrix}
(L_1,\hat L)=\left(\dfrac{c'b+c_1a}{-a^2-b^2}, \dfrac{c_1b-c'a}{-a^2-b^2}\right)\\
(L_2,\hat L)=\left(\dfrac{c'b+c_2a}{-a^2-b^2}, \dfrac{c_2b-c'a}{-a^2-b^2}\right)
\end{matrix}
$$

Distance $D$ between these two points:

$$
\begin{matrix}
D&=&\dfrac{1}{a^2+b^2}\sqrt{(c'b+c_2a-c'b-c_1a)^2+(c_1b-c'a-c_2b+c'a)^2}\\
&=&\dfrac{|c_2-c_1|}{\sqrt{a^2+b^2}}
\end{matrix}
$$

```haskell
parallelLineDist :: Line2d -> Line2d -> Double
parallelLineDist line1 line2
  | slope line1 == slope line2 = abs (c1 - c2) / sqrt (a * a + b * b)
  | otherwise = 1 / 0
  where
    (a, b, c1) = toCoeffValue line1
    (_, _, c2) = toCoeffValue line2
```

### Angle between two lines

Angle between two lines $L_1\equiv a_1x+b_1y+c_1=0$ (makes angle $\theta_1$ with $X$ axis) and $L_2\equiv a_2x+b_2y+c_2=0$ (say it makes $\theta_2$ with $X$ axis) is:

$$
\theta_1-\theta_2=\arctan\left(\dfrac{m_1-m_2}{1+m_1m_2}\right)
$$

where $m_1=-\dfrac{a_1}{b_1}$ and $m_2=-\dfrac{a_2}{b_2}$ .

Equation of line $L_1$ with respect to line $L_2$ : i.e, $X$ axis tilted at angle $\theta_2$ is:

$$
\begin{matrix}
y&=&mx+c\\
&=&\dfrac{a_2b_1-a_1b_2}{a_1a_2+b_1b_2}\cdot x+c\\
(a_1b_2-a_2b_1)x+(a_1a_2+b_1b_2)y+c&=&0\\
a'x+b'y+c&=&0
\end{matrix}
$$


where $c=\sqrt{a'^2+b'^2}\cdot \dfrac{c_1}{\sqrt{a_1^2+b_1^2}}$ : considering the distance between the origin point and line $L_1$ is same as point of origin and new line $\hat L$.

Note: Below set of equations will make sense in desmos graph.

```desmos-graph
3x-2y=10
2x-4y=5
\arctan\left(\frac{2}{4}\right)\cdot\frac{180}{\pi}
\arctan\left(\frac{3}{2}\right)\cdot\frac{180}{\pi}
\arctan\left(\frac{3}{2}\right)\cdot\frac{180}{\pi}-\arctan\left(\frac{2}{4}\right)\cdot\frac{180}{\pi}
-8x+14y+\left(\sqrt{5}\cdot20\right)=0
\arctan\left(\frac{8}{14}\right)\cdot\frac{180}{\pi}
14x+8y=0
2x+3y=0
\left(2.308\right)^{2}+\left(1.538\right)^{2}
\left(1.376\right)^{2}+\left(2.408\right)^{2}
\left(\arctan\left(\frac{14}{8}\right)-\arctan\left(\frac{2}{3}\right)\right)\cdot\frac{180}{\pi}
\arctan\left(\frac{3}{2}\right)\cdot\frac{180}{\pi}-\arctan\left(\frac{8}{14}\right)\cdot\frac{180}{\pi}
```


